/*	-WHAT IS THIS?-
	This file adds optional material to "MPMB's Character Record Sheet" found at https://flapkan.com/mpmb/charsheets
	Import this file using the "Add Extra Materials" bookmark.

*/

/*	-INFORMATION-
	Subject:	Campaign Guide
	Effect:		This script adds content from the Maranatha Campaign Guide written by kestrana (CJ Oliver). It includes the witch class, 
	college of folk bard subclass, militia fighter subclass, and new spells, items, feats, and weapons.
	Sheet:		v13.00.00 (2018-??-??) [identical to v12.999 syntax, except v12.999 uses 'borrow' for the burrow speed]
*/

var iFileName = "Maranatha Campaign Guide - MCG.js";
RequiredSheetVersion(12.999);

SpellsList["glorybolt"] = {
	name : "Glorybolt",
	classes : ["cleric"],
	source : ["MCG", 0],
	level : 1,
	school : "Evoc",
	time : "1 a",
	range : "120 ft",
	components : "V,S",
	duration : "1 round",
	description : "1 target rngd atk roll, on hit 4d6 + 1d6/SL radiant + target has disad on next atk/save/ability check",
	descriptionFull : "A brilliant cordon of light streaks toward a creature of your choice within range. Make a ranged spell attack against the target. On a hit, the target takes 4d6 radiant damage, and has disadvantage on their next attack roll or saving throw, thanks to the thick ropes of milky energy that wrap around it. When you cast this spell using a spell slot of 2nd level or higher, the damage increases by 1d6 for each slot level above 1st."
};
SpellsList["call the quarters"] = {
	name : "Call the Quarters",
	classes : ["cleric", "druid", "ranger", "warlock", "witch (maranatha)"],
	source : ["MCG", 0],
	ritual : true,
	level : 1,
	school : "Conj",
	time : "10 min",
	range : "Self (15 ft)",
	components : "V,S",
	duration : "1 hour",
	description : "15 ft. rad. shows N, S, E, W, elev.; friendly crea. gain Sanctuary inside",
	descriptionFull : "You trace a circular outline on the ground, creating a magical space that aligns to the cardinal directions. The circle indicates which direction is north, south, east, and west, and provides your elevation or how deep you are underground. When a friendly creature first enters the circle, or begins it's turn there, it gains the benefits of the Sanctuary spell as if it were cast on them."
};
SpellsList["ruinous bolt"] = {
	name : "Ruinous Bolt",
	classes : ["druid", "sorcerer", "warlock", "witch (maranatha)"],
	source : ["MCG", 0],
	level : 1,
	school : "Necro",
	time : "1 a",
	range : "120 ft",
	components : "V,S,M",
	compMaterial : "Powdered Wormwood",
	duration : "Instantaneous",
	description : "1 target rngd atk roll, on hit 2d6 + 1d6/SL acid & 1d6 acid at end of target's turn. Auto-crit on objects.",
	descriptionFull : "Make a ranged spell attack against the target. On a hit, the target takes 2d6 acid damage, and another 1d6 acid damage at the end of its next turn. When this spell targets a non-magical item that isn't being worn or carried, a hit is always a critical. When you cast this spell using a spell slot of 2nd level or higher, the damage increases by 1d6 for each slot level above 1st."
};
SpellsList["omen"] = {
	name : "Omen",
	classes : ["bard", "cleric", "witch (maranatha)"],
	source : ["MCG", 0],
	ritual : true,
	level : 1,
	school : "Trans",
	time : "10 min",
	range : "Touch",
	components : "V,S,M",
	compMaterial : "An item to be transmuted",
	duration : "1 hour",
	description : "Mundane item glows red = danger, gold = treasure, blue = secret door +1 hr/SL",
	descriptionFull : "You touch a non-magical item. For the duration, the item provides clues as to the immediate future. It glows red when unfriendly creatures are within 30 feet. It glows gold when treasure worth 50g or more is within 10 feet. It glows blue when a concealed or secret entrance is within 10 feet. It glows a combination of colors when multiple conditions are true. When you cast this spell using a spell slot of 2nd level or higher, the duration increases by 1 hour for each slot level above 1st."
};
SpellsList["read aura"] = {
	name : "Read Aura",
	classes : ["witch (maranatha)"],
	source : ["MCG", 0],
	ritual : true,
	level : 1,
	school : "Ench",
	time : "1 ba",
	range : "30 ft",
	components : "V",
	duration : "1 min",
	description : "Determine health, age, align., mental, emotion, traits of creature you can see.",
	descriptionFull : "Target a creature you can see. For the duration, you can determine the creature's relative health, age, alignment, mental state, emotions, and personality traits. If the creature's emotions change during the duration (such as it becomes angry) you see their aura shift to reflect this change. The spell ends if you can no longer see the creature. When you cast this spell using a slot of 2nd level or higher, you can target an additional creature for each slot level above 1st."
};
SpellsList["curse chakra"] = {
	name : "Curse Chakra",
	classes : ["paladin", "witch (maranatha)"],
	source : ["MCG", 0],
	level : 2,
	school : "Ench",
	time : "1 a",
	range : "60 ft",
	components : "V,S",
	duration : "Conc, 1 min",
	save : "Con",
	description : "1 creature saves or gains vulnerability to one of acid/fire/necro/poison/psy.",
	descriptionFull : "You gesture to a creature's energy points and twist their aura to allow vulnerability to the elements. The target makes a Constitution saving throw. On a failure, choose acid, fire, necrotic, poison, or psychic. The target gains vulnerability to that damage type for the duration of the spell. When you cast this spell using a spell slot of 3rd level or higher, you can target an additional creature within range for each slot level above 2nd."
};
SpellsList["balefire"] = {
	name : "Balefire",
	classes : ["sorcerer", "warlock", "witch (maranatha)", "wizard"],
	source : ["MCG", 0],
	level : 2,
	school : "Ench",
	time : "1 a",
	range : "60 ft",
	components : "V,S,M",
	compMaterial : "A piece of brimstone",
	duration : "1 min",
	save : "Con",
	description : "1 crea. takes 3d6 + 1d6/SL and 1d6(+1/SL) at start of turn, repeat save at end. Save halves dmg, ends effect.",
	descriptionFull : "You channel the energy of brimstone into a creature you can see within range. That creature must make a Constitution saving throw. On a failed save, it takes 3d6 fire damage, and takes an additional 1d6 fire damage at the start of each of its turns. It can repeat the save at the end of its turn to end this effect. On a successful save, the target takes half damage this turn only. When you cast this spell using a slot of 3rd level or higher, the target takes an additional 1d6 fire damage on the first turn, and an additional +1 damage on subsequent turns for each slot above 2nd level."
};
SpellsList["chant"] = {
	name : "Chant",
	classes : ["bard", "cleric", "druid", "paladin", "witch (maranatha)"],
	source : ["MCG", 0],
	level : 2,
	school : "Ench",
	time : "1 a",
	range : "30 ft",
	components : "V",
	duration : "1 min",
	description : "Heals friendly creatures amount equal to your spellcasting mod; bonus action to continue.",
	descriptionFull : "You begin chanting words of restorative power. Each creature of your choice within range that can hear you heals for an amount equal to your spellcasting modifier. On subsequent turns you can use a bonus action to continue the chant. The spell ends if you use your bonus action for anything else. The spell ends for an affected creature if it leaves the range of the spell or it cannot hear you. When you cast this spell using a slot of 3rd level or higher, the range of the spell increases by 10 ft. for each slot above 2nd level."
};
SpellsList["influence weather"] = {
	name : "Influence Weather",
	classes : ["druid", "ranger", "witch (maranatha)"],
	source : ["MCG", 0],
	level : 2,
	school : "Trans",
	time : "1 a",
	range : "Self (1 mile)",
	components : "V,S",
	duration : "Instantaneous",
	description : "Local weather shifts one category for 1 hr. Sun/Lt. Cld./Hvy Cld/Lt RainSno/Hvy RainSno/Storm.",
	descriptionFull : "You use your connection to nature to shift the local weather slightly in one direction (see chart). The new weather takes effect over the course of the next minute after the spell is cast, and lasts at least 1 hour before natural weather patterns resume in the affected area. You cannot affect the weather in the same area more than once in an 8 hour period. When you cast this spell using a slot of 3rd level or higher, the new weather effect lasts 1 hour longer for each slot above 2nd."
};
SpellsList["karma"] = {
	name : "Karma",
	classes : ["bard", "warlock", "witch (maranatha)"],
	source : ["MCG", 0],
	level : 2,
	school : "Ench",
	time : "1 ba",
	range : "Touch",
	components : "V,S",
	duration : "1 min",
	description : "Willing crea. reduces and reflects 1d6 damage of same type to attacker. 5th level for 2 creas.",
	descriptionFull : "Touch a willing creature. For the duration, whenever that creature takes damage, it reduces that damage by 1d6 + your spellcasting modifier and reflects that amount back to its attacker, using the same damage type. This effect does not reflect any other conditions applied by the attack. When you cast this spell using a slot of 5th level or higher, you can target an additional creature."
};
SpellsList["conjure cannon"] = {
	name : "Conjure Cannon",
	classes : ["wizard"],
	source : ["MCG", 0],
	ritual : true,
	level : 3,
	school : "Conj",
	time : "1 a",
	range : "300 ft.",
	components : "V,S,M",
	compMaterial : "A pinch of gunpowder",
	duration : "Conc, 10 min",
	description : "Create cannon and 4 balls; range sp. atk. on hit 2d20 + 1d20/2SL 1st turn only. Others can use.",
	descriptionFull : "You create a cannon and a pile of four cannon balls and firing supplies in an unoccupied space that you can see within 30 ft. of you. Make a ranged spell attack against a target you can see in range. On a hit, the target takes 2d20 bludgeoning damage. While you maintain concentration on this spell, a character can use an action to load one of the conjured cannonballs or their own ammunition and fire the cannon as per the game statistics for this weapon type. When you cast this spell using a spell slot of 5th  level or higher, the damage increases by 1d20 for each two slot levels above 3rd, and you create one additional cannonball."
};
SpellsList["acid rain"] = {
	name : "Acid Rain",
	classes : ["druid", "sorcerer", "witch (maranatha)"],
	source : ["MCG", 0],
	level : 3,
	school : "Conj",
	time : "1 a",
	range : "300 ft.",
	components : "V,S,M",
	compMaterial : "An ounce of acid",
	duration : "Conc, 1 min",
	save : "Con",
	description : "Create 20x40 cylinder. Crea. inside take 4d8 + 1d8/SL acid, half saves. Bonus act. move 40 ft.",
	descriptionFull : "You create a 20-foot-radius, 40-foot-high cylinder centered on a point in range. Each creature in the cylinder when it appears or that ends its turn there must make a Constitution save.  A creature takes 4d8 acid damage on a failed save, or half on a success. As a bonus action, you can move the cylinder up to 30 ft. in any direction in range. When you cast this spell using a slot of 4th level or higher, the damage increases by 1d8 for each slot above 3rd."
};
SpellsList["animate plants"] = {
	name : "Animate Plants",
	classes : ["druid", "ranger", "witch (maranatha)"],
	source : ["MCG", 0],
	level : 3,
	school : "Trans",
	time : "1 min",
	range : "10 ft.",
	components : "V,S,M",
	compMaterial : "Living plants",
	duration : "24 hrs",
	description : "Create a needle blight under your control. Bonus action to issue commands. Can have multiple.",
	descriptionFull : "This spell creates a plant servant. Choose a Medium or Small living plant within range. The spell imbues that plant with basic intelligence and ambulatory skills. It becomes a Needle Blight under your control. On each of your turns you can use a bonus action to mentally command any creature you made with this spell if it is within 60 ft. of you. If you control multiple creatures you can issue the command to any or all of them, issuing the same command to each one. You decide what action the creature will take and where it will move during its next turn, or you can issue a general command, such as to guard a particular chamber or corridor. If you issue no commands, the creature only defends itself against hostile creatures. Once given an order, the creature continues to follow it until its task is complete. The creature is under your control for 24 hours, after which it stops obeying any command you’ve given it. To maintain control of the creature for another 24 hours, you must cast this spell on the creature again before the current 24-hour period ends. This use of the spell reasserts your control over up to four creatures you have animated with this spell, rather than animating a new one. When you cast this spell using a spell slot of 4th level or higher, you animate or reassert control over two additional Plant creatures for each slot above 3rd. Each of the creatures must come from a different plant."
};
SpellsList["dream walk"] = {
	name : "Dream Walk",
	classes : ["druid", "witch (maranatha)"],
	source : ["MCG", 0],
	level : 3,
	school : "Trans",
	time : "1 min",
	range : "Self (300 ft.)",
	components : "V",
	duration : "1 hr",
	description : "During long rest assume incorporeal dream form that can see and hear area around you.",
	descriptionFull : "This spell can only be cast during a long rest. During your long rest, while you are sleeping or in a Trance, you can explore your surroundings in range in your dreams. Your incorporeal dream form moves at the same speed you do, and can't be seen, smelled, or heard except by creatures with trueseeing. The world in your dreams appears hazy and less detailed than the real world. You can't manipulate objects or interact with any creatures while in this state, but you can see and hear the areas around you. The spell ends if your dream form comes into contact with an Antimagic Field or similar magic. Another creature must use an action to awaken you from this state to exit it before the duration is complete. When you cast this spell using a slot of 4th level or higher, the radius of the spell increases by an additional 300 feet for every slot level above 3rd."
};
SpellsList["orb of decay"] = {
	name : "Orb of Decay",
	classes : ["sorcerer", "warlock", "witch (maranatha)", "wizard"],
	source : ["MCG", 0],
	level : 4,
	school : "Necro",
	time : "1 a",
	range : "150 ft.",
	components : "V,S",
	duration : "1 min",
	save : "Con",
	description : "20 ft. sphere, crea. in sphere or end turn there take 2d6+1d6/SL necro; BA rngd atk 4d6+1d6/SL necro.",
	descriptionFull : "A 20-foot-radius sphere appears centered on a point you can see in range. Each creature in the sphere when it appears or that ends its turn there must pass a Constitution save or take 2d6 necrotic damage. The sphere’s space is difficult terrain. As a bonus action, you can cause a tendril of dark energy to strike up to 60 feet from the center of the sphere. Make a ranged spell attack. You have advantage if the target is in the sphere. On hit, it deals 4d6 necrotic damage. When you cast this spell using a slot of 5th level or higher, the damage increases for each of its effects by 1d6 for each slot level above 4th."
};
SpellsList["rune of binding"] = {
	name : "Rune of Binding",
	classes : ["bard", "sorcerer", "witch (maranatha)", "wizard"],
	source : ["MCG", 0],
	level : 4,
	school : "Conj",
	time : "1 a",
	range : "30 ft.",
	components : "V,S,M",
	compMaterial : "A piece of stone",
	duration : "1 min",
	save : "Str",
	description : "Put stone in range, 15 ft. pulls crea. of your choice. Save ends effect on that creature.",
	descriptionFull : "You imbue a piece of stone with a magical curse that draws enemies to it. Choose a point within range to toss the stone where it embeds into the ground and cannot be removed until the spell ends. Creatures of your choice within a 15 ft. radius of that point must succeed on a Strength saving throw or be pulled to an unoccupied space within 5 ft. of the stone, or to an unoccupied space as close to the stone as possible. At the start of each of it's turns, an affected creature can repeat the saving throw. On a failure, the creature's speed is reduced to 0 for that turn. "
};
SpellsList["create elixir"] = {
	name : "Create Elixir",
	classes : ["bard", "cleric", "druid", "paladin", "ranger", "sorcerer", "warlock", "witch (maranatha)", "wizard"],
	source : ["MCG", 0],
	ritual : true,
	level : 5,
	school : "Conj",
	time : "10 min",
	range : "Self",
	components : "V,S,M\u2020",
	compMaterial : "A glass vial worth 1g, which the spell consumes",
	duration : "24 hrs",
	description : "Req. prof. w/ alch. Create magical elixir based on chart. See book.",
	descriptionFull : "You must be proficient with alchemist's supplies to cast this spell. You create a magical elixir that fills an empty glass vial. Roll percentile dice and consult the chart to determine what elixir is created. The magic of the elixir lasts for 24 hours and then disappears if the elixir has not been consumed."
};
SpellsList["litany of the dead"] = {
	name : "Litany of the Dead",
	classes : ["bard", "paladin", "witch (maranatha)"],
	source : ["MCG", 0],
	ritual : true,
	level : 7,
	school : "Necro",
	time : "30 min",
	range : "Self",
	components : "V,S,M\u2020",
	compMaterial : "A rune carved bowl worth 10,000g, which the spell consumes",
	duration : "Instantaneous",
	description : "12 creas. gain immune to disease, fear, make Con saves w/ adv. and resist to one dmg. type. See book.",
	descriptionFull : "You read the names and deeds of the heroic dead, inspiring those that can hear you with the glory of their ancestors. The litany takes 1 hour to complete, and the beneficial effects don’t set in until this hour is over. Up to twelve other creatures can benefit from the litany. These creatures gain several benefits. They become immune to disease and being frightened, make all Constitution saving throws with advantage, and gain resistance to one damage type of their choice. If a creature affected by Litany of the Dead dies, their spirit form rises and continues to take actions as if they were alive for a number of rounds equal to their Constitution modifier (minimum 1). In this form, that creature cannot take damage and passes all saving throws. It cannot cast any spells that would kill itself or raise itself from the dead. When you cast this spell using a spell slot of 8th level or higher, you heal one additional target for each slot level above 7th."
};
SpellsList["sacrifice"] = {
	name : "Sacrifice",
	classes : ["druid", "witch (maranatha)"],
	source : ["MCG", 0],
	level : 7,
	school : "Necro",
	time : "1 a",
	range : "Self",
	components : "V,S,M\u2020",
	compMaterial : "A ritual dagger, coated in rare oils and ungents worth 1000g, which the spell consumes",
	duration : "Instantaneous",
	description : "You die, healing a creature to full and curing all negative effects. You reincarnate at dawn.",
	descriptionFull : "A character that has Reincarnate prepared and 7th level spell slots, is considered to also have this spell prepared. You plunge the ritual dagger into your heart, instantly killing your character and restoring another friendly character that you can see or that can see or hear you to full health, and removing any poison, disease, petrification, or curse effects on that character. At the following dawn, you automatically Reincarnate. While under the effects of this spells, other spells that would resurrect you from the dead do not affect you. Once you have sacrificed yourself in this way, there is a chance that your spirit will grow weary of dying. Should you become affected by Reincarnate again (either directly or via Sacrifice), roll percentile dice. On a result of 10 or lower, your spirit declines to enter your new body and you are permanently dead."
};
SpellsList["virulent storm"] = {
	name : "Virulent Storm",
	classes : ["warlock", "witch (maranatha)"],
	source : ["MCG", 0],
	level : 7,
	school : "Necro",
	time : "1 a",
	range : "120 ft",
	components : "V,S,M",
	compMaterial : "A piece of diseased flesh",
	duration : "1 min",
	save : "Dex",
	description : "Crea w/in 5 ft. of point take 6d10 + 1d10/SL, save halves. In cylinder, Con or disease 1/2 speed.",
	descriptionFull : "A greenish cloud appears in the shape of a cylinder that is 60 feet tall with a 30-foot radius, centered on a point you can see 60 feet directly above you. The spell fails if you can't see a point in the air where the cloud could appear (for example, if you are in a room that can't accommodate the cloud). When you cast the spell, choose a point you can see within range. A bolt of acidic energy flashes down from the cloud to that point. Each creature within 5 feet of that point must make a Dexterity saving throw. A creature takes 6d10 acid damage on a failed save, or half as much damage on a successful one. On each of your turns until the spell ends, you can use your action to call down an acidic bolt in this way again, targeting the same point or a different one. Creatures of your choice that start their turn within the cylinder must succeed on a Constitution saving throw or become diseased, with their speed reduced by half until the disease is removed. An affected creature can repeat the saving throw at the end of each of their turns once they are outside the cylinder, ending the disease on a success. When you cast this spell using a spell slot of 8th level or higher, the damage increases by 1d10 for each slot level above 7th."
};
SpellsList["black moon"] = {
	name : "Black Moon",
	classes : ["witch (maranatha)"],
	source : ["MCG", 0],
	level : 8,
	school : "Necro",
	time : "1 a",
	range : "Self (150 ft)",
	components : "V,S",
	duration : "Conc, 1 min",
	save : "Con",
	description : "Mag. drkness blinds 150 ft. Enemies not blind Wis save or 4d6 psychic dmg from visions of horror.",
	descriptionFull : "Darkness pervades the area in a 150 ft. radius around you, blinding creatures of your choice that do not succeed at a Constitution saving throw. Creatures affected by this condition can repeat the saving throw at the end of their turn. The darkness fills around corners, seeps through cracks and penetrates permeable surfaces such as curtains. While in the radius of the spell, those that can see are plagued by visions of abject horror. Creatures of your choice that start their turn in the Black Moon and can see must succeed on a Wisdom saving throw or take 4d6 psychic damage. "
};
SpellsList["discarnate"] = {
	name : "Discarnate",
	classes : ["witch (maranatha)"],
	source : ["MCG", 0],
	level : 8,
	school : "Necro",
	time : "1 a",
	range : "Touch",
	components : "V,S,M",
	compMaterial : "A metal rod attuned to the Abyss",
	duration : "Instantaneous",
	save : "Con",
	description : "Touch living crea. w/ soul. On fail, soul is ripped from body and flung into Abyss. 10d6 psychic on save.",
	descriptionFull : "You touch a living creature that has a soul. That creature must make a Constitution saving throw. On a failure, the soul is ripped from the body and flung into the Abyss, leaving its physical form behind. On a success, the target takes 10d6 psychic damage. This spell has no effect on undead, animals, or beings whose soul is promised elsewhere."
};
SpellsList["minor ward"] = {
	name : "Minor Ward",
	classes : ["cleric", "druid", "witch (maranatha)"],
	source : ["MCG", 0],
	level : 0,
	school : "Ench",
	time : "1 a",
	range : "30 ft",
	components : "V,S",
	duration : "Conc, 1 min",
	description : "Friendly creature has advantage on next save made in duration.",
	descriptionFull : "You speak a word of power while pointing at a friendly creature. That creature is warded against harmful effects and has advantage on the next saving throw they make within the spell's duration."
};

[	// cantrips
	"acid splash", "chill touch", "create bonfire", "friends", "infestation", "magic stone", "minor illusion", "minor ward", "poison spray", "primal savagery", "produce flame", "shillelagh", "spare the dying", "thorn whip", "toll the dead", "vicious mockery",

	// 1st level
	"animal friendship", "bane", "call the quarters", "cause fear", "charm person", "color spray", "curse chakra", "disguise self", "dissonant whispers", "entangle", "false life", "find familiar", "fog cloud", "hex", "ruinous bolt", "omen", "ray of sickness", "read aura", "silent image", "sleep", "tasha's hideous laughter", "unseen servant",

	// 2nd level
	"alter self", "animal messenger", "balefire", "blindness/deafness", "calm emotions", "chant", "crown of madness", "darkvision", "enhance ability", "enlarge/reduce", "enthrall", "hold person", "invisibility", "influence weather", "karma", "magic mouth", "nystul's magic aura", "phantasmal force", "ray of enfeeblement", "silence", "spike growth", "suggestion", "web",

	// 3rd level
	"animate dead", "bestow curse", "conjure animals", "enemies abound", "fear", "feign death", "fly", "gaseous form", "hypnotic pattern", "life transference", "major image", "plant growth", "revivify", "speak with dead", "speak with plants", "spirit guardians", "summon lesser demons", "vampiric touch", "water breathing",

	// 4th level
	"blight", "charm monster", "compulsion", "confusion", "conjure woodland beings", "dominate beast", "giant insect", "grasping vine", "greater invisibility", "hallucinatory terrain", "phantasmal killer", "polymorph", "shadow of moil", "summon greater demon",

	// 5th level
	"awaken", "cloudkill", "contagion", "creation", "danse macabre", "dominate person", "dream", "enervation", "geas", "hold monster", "insect plague", "mislead", "reincarnate", "seeming",

	// 6th level
	"circle of death", "conjure fey", "create homunculus", "create undead", "disintegrate", "eyebite", "harm", "heal", "magic jar", "mass suggestion", "mental prison", "otto's irresistable dance", "programmed illusion", "soul cage", "wall of thorns",

	// 7th level
	"etherealness", "finger of death", "mirage arcane", "power word pain", "project image", "regenerate", "sequester", "simulacrum",

	// 8th level
	"abi-dazim's horrid wilting", "animal shapes", "antipathy/sympathy", "clone", "control weather", "dominate monster", "feeblemind", "illusory dragon",

	// 9th level
	"astral projection", "mass polymorph", "power word kill", "psychic scream", "shapechange", "true polymorph", "weird", "wish"
].forEach( function (s) {
	if(SpellsList[s] && SpellsList[s].classes && SpellsList[s].classes.indexOf("witch (maranatha)") === -1) SpellsList[s].classes.push("witch (maranatha)");
});

ClassList["witch (maranatha)"] = { 

	regExpSearch : /^(?=.*witch).*$/i,
	
	name : "Witch", //required; the name to use for the class,
	
	source : ["MCG", 0], //required; the source and the page number. "HB" stands for homebrew. See the "Complete SourceList" for an overview of sources that are already defined. Or define a new source using the "Homebrew Syntax - SourceList.js". // This can be an array of arrays to indicate the things appears in multiple sources. For example, if something appears on page 7 of the Elemental Evil Player's Companion and on page 115 of the Sword Coast Adventure Guide, use the following: [["E", 7], ["S", 115]]
	
	primaryAbility : "\n \u2022 Witch: Intelligence;", //required; the text to display when citing the primary ability of the class
	
	prereqs : "\n \u2022 Witch: Intelligence 13;", //required; the text to display when citing the prerequisite for the class when multiclassing
	
	die : 6, //required; the type of hit die the class has (i.e. 10 means d10)
	
	improvements : [0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 5, 5], //required; the amount of ability score improvements (or feats) at each level. Note that there are 20 entries, one for each level. This example uses the Fighter's progression
	
	saves : ["Int", "Dex"], //required; the two save proficiencies.
	
	skills : ["\n\n" + toUni("Witch") + ": Choose two from Deception, Investigation, Medicine, Nature, Perception, and Sleight of Hand.", "\n\n" + toUni("Witch") + ": Choose one from Deception, Medicine, Nature, and Sleight of Hand."], //required; the text to display for skill proficiencies. Note the \n\n at the start, they are important! The first entry is for when the class is the primary class, the second entry is for when the class is taken later as part of a multiclass

/* SYNTAX CHANGE v12.998 >> old syntax for 'tools' and 'languages' are no longer supported!! */
	toolProfs : { // optional; this is an object with arrays with the tool proficiencies gained. Each entry in an array can be its own array of 2 entries. The first entry is the name of the tool and the second entry is either 1) a number if the tool is yet to be chosen, or 2) the 3-letter ability score abbreviation if the tool is to be listed in the skill section and have a bonus calculated
		primary : [["Alchemist's Supplies or Herbalism Kit", 1]], // optional; the tool proficiencies gained if the class is the primary class (i.e. taken at 1st level)
		secondary : [["Alchemist's Supplies"]] // optional; the tool proficiencies gained if the class is not the primary class (i.e. taken at a later level)
	},
	
	armor : [ //required; the 4 entries are for: ["light", "medium", "heavy", "shields"]
		[true, false, false, false], //required; the armor proficiencies if this is the first or only class
		[true, false, false, false] //required; the armor proficiencies if this class is multiclassed with (so not taken at level 1, but later)
	],
	
	weapons : [ //required; the 3 entries are for: ["simple", "martial", "other"]
		[false, false, ["club", "dagger", "hand crossbow", "mace", "quarterstaff"]], //required; the weapon proficiencies if this is the first or only class
		[false, false, ["hand crossbow"]] //required; the weapon proficiencies if this class is multiclassed with (so not taken at level 1, but later)
	],
	
	equipment : "Witch starting equipment:\n \u2022 quarterstaff -or- a dagger;\n \u2022 A component pouch -or- a witch's wand;\n \u2022 An explorer's pack -or- a monster hunter's pack;\n \u2022 An herbalism kit -or- alchemist's supplies; \u2022 hide armor, spellbook.\n\nAlternatively, choose 5d4 \xD7 10 gp worth of starting equipment instead of both the class' and the background's starting equipment.", //required; the text to display when citing the starting equipment
	
	subclasses : ["Witch's Circle", ["crimson circle", "cerulean circle", "crystal circle"]], //required; the names of the subclasses. The first entry is the overall name that is given to the subclasses, the second entry is a list of the subclass, using the exact names of the entry of the subclasses in the ClassSubList. //Note that if one of the entries in the array of subclasses doesn't exist in the ClassSubList, the sheet will throw an error as soon as you make a character with levels in this class
	//IMPORTANT: for any subclass you add using the AddSubClass() function, don't list them here! The AddSubClass() function makes its own entry in this array! If you have entries here that don't exist (because you didn't add any ClassSubList entry, or added it using the AddSubClass() function, then the sheet will throw strange errors)!
	
	attacks : [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1], //required; the amount of attacks at each level. Note that there are 20 entries, one for each level.
	
	abilitySave : 4, //optional, but required for a spellcaster; the ability score to use for the Ability Saving Throws. Remove this line if your class has no Ability that requires Saving Throws. (Str=1, Dex=2, Con=3, Int=4, Wis=5, Cha=6)
		
	spellcastingFactor : 1, //required for a spellcaster; the speed with which spell progression works type 1 for full spellcasting (Cleric), 2 for half spellcasting (Paladin), and 3 for one-third spellcasting (Arcane Trickster). This can be any positive number other than 0. Remove this line if your class has no spellcasting. If your character uses the Warlock way of spellcasting, write "warlock1" here. The 1 indicates the spell progression factor. You can change it to a 2 or 3 to have half or one-third spell progression (or to any other factor you like).
		// You can also have this refer to a Spell Slot progression you define yourself, as a separate variable (see "Homebrew Syntax - SpellTable.js"). In order to do this the name of that variable and the spellcastingFactor must match. Using the name "purplemancer" for example would mean that here you put [spellcastingFactor : "purplemancer1"] (the 1 is the factor, this can be any positive number other than 0) while for the variable containing the table you use "purplemancerSpellTable". Note that the name is all lower case!
			
	spellcastingKnown : { //Optional; Denotes the amount and type of spells the class has access to
	
		cantrips : [2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 6, 6, 6, 6], //Optional; This can either be one number, an array of 20 numbers, or be omitted for a class that doesn't have access to cantrips. The numbers reflect the amount of cantrips known
		
		spells : "book",//Optional; This can either be one number, an array of 20 numbers, or be omitted for a class that doesn't have access to spells. The numbers reflect the amount of spells known. For a class that doesn't know spells, but prepares them from a list, you should put "list" here. For a class that uses a spellbook, you should put "book" here.
		
		prepared : true //Optional; This indicates that the class has to prepare spells like a cleric/druid/paladin/wizard
	
	},

	spellcastingList : {
		class : "witch (maranatha)"
	},
	
	features : { //required;  the class features. Each works the same way, so only a couple of example are given. You can add as many as you want
	
		"spellcasting" : {
			name : "Spellcasting",
			source : ["P", 114],
			minlevel : 1,
			description : "\n   " + "I can cast prepared witch cantrips/spells, using Intelligence as my spellcasting ability" + "\n   " + "I can use a witch's wand as a spellcasting focus" + "\n   " + "I can cast all witch spells in my spellbook as rituals if they have the ritual tag",
			additional : ["2 cantrips known", "2 cantrips known", "2 cantrips known", "2 cantrips known", "3 cantrips known", "3 cantrips known", "3 cantrips known", "3 cantrips known", "4 cantrips known", "4 cantrips known", "4 cantrips known", "4 cantrips known", "5 cantrips known", "5 cantrips known", "5 cantrips known", "5 cantrips known", "6 cantrips known", "6 cantrips known", "6 cantrips known", "6 cantrips known"] //optional; text to display in the header of the feature. This can be one value, but can also be an array of 20 values, one for each level.
		},
						
		"magic tricks" : {
			name : "Magic Tricks",
			source : ["MCG", 0],
			minlevel : 1,
			description : "\n   " + "I learn a cantrip of my choice from the following: Druidcraft, Prestidigitation, Thaumaturgy",
									
			spellcastingBonus : { //optional; an object that adds something to the "Bonus Spells" section of the spell selection dialog //this object can have all the same attributes as the "spellcastingList" object, but must also have a "name" defined" //the other things that can be defined in this that are not in the "spellcastingList" object, are the "selection", "times" and "prepared" values
			
				name : "Magic Tricks", //required; this is used to identify the object, so must be an unique name
											
				spells : ["druidcraft", "prestidigitation", "thaumaturgy"], //optional, but required if not including the "class" entry; see "spellcastingList" object
				
				selection : ["druidcraft", "prestidigitation", "thaumaturgy"], //optional if "spells" is defined; this is the default selection for the array specified in "spells"
				
				times : 1, //optional; this is the number of times the bonus spells should be added. //This can also be an array of 20 values. That way the number of times are level-dependent
				
				atwill : true, //optional; if set to 'true', this makes the spell selected for this/these bonus spells to get "At Will" in the first column
				
				firstCol : "8", //optional; if set to any value, this makes the spell selected for this/these bonus spells to get the first two letters/numbers of that value in the first column
			},
			
			spellFirstColTitle : "Wi", //optional, only works if spellcastingBonus exists; if set to any value, this makes the first column of the captions on the spell sheet be set to the first two letters/numbers of that value	
		
		},
		
		"evil eye" : {
			name : "Evil Eye",
			source : ["MCG", 0],
			minlevel : 2,
			description : "\n   " + "Choose a School of Magic using the \"Choose Feature\" button above. As a bonus action I can choose a target I can see within thirty feet. The target has disadvantage on saving throws to resist effects of my spells from the chosen school.", //required; the text to put in the "Class Features" field
			choices : ["conjuration", "enchantment", "illusion", "necromancy", "transmutation"], //optional; choices the feature offers, if any.
			"conjuration" : {
					name : "Conjuration",
					description : "",
					source : [["MCG", 0],
			"enchantment" : {
					name : "Enchantment",
					description : "",
					source : [["MCG", 0],
			"illusion" : {
					name : "Illusion",
					description : "",
					source : [["MCG", 0],
			"necromancy" : {
					name : "Necromancy",
					description : "",
					source : [["MCG", 0],
			"transmutation" : {
					name : "Transmutation",
					description : "",
					source : [["MCG", 0],		
			usages : "Intelligence modifier per ",
usagescalc : "event.value = Math.max(1, What('Int Mod'));",
			recovery : "long rest",

			action : ["bonus action"] //optional; adds the name of this feature to the bonus action list when chosen. The options are "action", "bonus action", and "reaction"
		},
		
		"subclassfeature3" : { //You need at least one entry named "subclassfeatureX". It signals the sheet to ask the user for which subclass he would like to have. The level of this feature should match the level the class needs to select a subclass. Once a subclass is selected, any feature with "subclassfeature" in the object name in the class entry will be ignored.
			name : "Witch's Circle",
			source : ["MCG", 0],
			minlevel : 3,
			description : "\n   " + "Choose a Witch's Circle you wish to join and put it in the \"Class\" field" + "\n   " + "Choose either Crimson Circle, Cerulean Circle, or Crystal Circle",
		},
		
		"magic mirror" : {
			name : "Magic Mirror",
			source : ["MCG", 0],
			minlevel : 18,
			description : desc([
				"I can perfectly alter my appearance. I expend 5000g to create a magic mirror in which I store my actual appearance. Any character who sees the mirror sees my true appearance reflected. My altered appearance is undetectable by truesight or other methods that would reveal it as an illusion, and it cannot be unwillingly dispelled, however other mirrors also reflect my appearance. If the mirror is broken, I immediately revert to my true appearance."]),
			usages : [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1],
			recovery : "short rest",
			action : ["action"],
		},		
		"all-seeing eye" : {
			name : "All-Seeing Eye",
			source : ["MCG", 0],
			minlevel : 20,
			description : "\n   " + "Choose a second School of Magic using the \"Choose Feature\" button above. My Evil Eye affects this school as well. My Evil Eye ability now affects all targets affected by a spell I cast while using it. ", //required; the text to put in the "Class Features" field
			choices : ["conjuration", "enchantment", "illusion", "necromancy", "transmutation"], //optional; choices the feature offers, if any.
			"conjuration" : {
					name : "Conjuration",
					description : "",
					source : [["MCG", 0],
			"enchantment" : {
					name : "Enchantment",
					description : "",
					source : [["MCG", 0],
			"illusion" : {
					name : "Illusion",
					description : "",
					source : [["MCG", 0],
			"necromancy" : {
					name : "Necromancy",
					description : "",
					source : [["MCG", 0],
			"transmutation" : {
					name : "Transmutation",
					description : "",
					source : [["MCG", 0],
		},
	}
}

AddSubClass( 
	"witch (maranatha)", 	
	"crimson circle", 	
	{ // don't forget this opening bracket

		regExpSearch : /Crimson/i
		
		subname : "Crimson Circle",
		
		source : ["MCG", 0], 
		
		features : { 		
			"subclassfeature1" : { 
				name : "Hard to Kill",
				source : ["M", 0],
				minlevel : 3,
				description : "\n   " + "I gain resistance to fire and water breathing.",
				dmgres : [["Fire"],
			},
			"subclassfeature2" : {
				name : "Crimson Circle Spells",
				source : ["M", 0],
				minlevel : 3,
				// need to find how to add bonus known spells like cleric or druid
			},
			"subclassfeature3" : {
				name : "Impactful Casting",
				source : ["M", 0],
				minlevel : 6,
				description : "\n   " + "I add my Intelligence modifier to the damage of my spells.",
				//need formula here
			},
			"subclassfeature4" : {
				name : "Vampiric Siphon",
				source : ["M", 0],
				minlevel : 10,
				description : "\n   " + "When I deal Necrotic spell damage, I heal myself for half the damage dealt.",
			},	
			"subclassfeature5" : {
				name : "Destructive Gaze",
				source : ["M", 0],
				minlevel : 14,
				description : "\n   " + "Once per long rest, I can use my Evil Eye as a Destructive Gaze." + "\n   " + "If the creature fails its save against my Evil Eye by 5 or more, it is turned to ash." + "\n   " + "Otherwise it is affected by my Evil Eye and it is frightened of me for 1 minute.",
				usages : [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1],
			recovery : "long rest",
			action : ["bonus action"],
			},
		}
	}
	
AddSubClass( 
	"witch (maranatha)", 	
	"cerulean circle", 	
	{ // don't forget this opening bracket

		regExpSearch : /Cerulean/i
		
		subname : "Cerulean Circle",
		
		source : ["MCG", 0], 
		
		features : { 		
			"subclassfeature6" : { 
				name : "Create Talisman",
				source : ["M", 0],
				minlevel : 3,
				description : "\n   " + "I can create a talisman that provides benefits for me or another person." + "\n   " + "I choose Amulet, Charm, Disk, Pentacle, or Poppet. See book for details.",
				usages : [1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2],
				recovery : "long rest",
				action : ["action"],
			},
			"subclassfeature7" : {
				name : "Cerulean Circle Spells",
				source : ["M", 0],
				minlevel : 3,
				// need to find how to add bonus known spells like cleric or druid
			},
			"subclassfeature8" : {
				name : "Wortcunning",
				source : ["M", 0],
				minlevel : 6,
				description : "\n   " + "When I administer a potion to another creature, I also gain the potion's benefits.",
			},
			"subclassfeature9" : {
				name : "Master Scribe",
				source : ["M", 0],
				minlevel : 10,
				description : "\n   " + "When I copy a spell from a scroll into my spellbook, the scroll is not destroyed." + "\n   " + "By spending 10 minutes, I make scrolls usable by any character with Spellcasting abilities.",
			},	
			"subclassfeature10" : {
				name : "Enthralling Gaze",
				source : ["M", 0],
				minlevel : 14,
				description : "\n   " + "Once per long rest, I can use my Evil Eye as an Enthralling Gaze." + "\n   " + "If the creature fails its save against my Evil Eye it is charmed by me for 10 minutes." + "\n   " + "It repeats the save if I direct it to do anything deadly.",
				usages : [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1],
				recovery : "long rest",
				action : ["bonus action"],
			},
		}
	}
	
AddSubClass( 
	"witch (maranatha)", 	
	"crystal circle", 	
	{ // don't forget this opening bracket

		regExpSearch : /Crystal/i
		
		subname : "Crystal Circle",
		
		source : ["MCG", 0], 
		
		features : { 		
			"subclassfeature11" : { 
				name : "Healer's Touch",
				source : ["M", 0],
				minlevel : 3,
				description : "\n   " + "I learn the spells Cure Wounds, Healing Word, and Bless.",
				// need to find how to add spells.
			},
			"subclassfeature12" : {
				name : "Crystal Circle Spells",
				source : ["M", 0],
				minlevel : 3,
				// need to find how to add bonus known spells like cleric or druid
			},
			"subclassfeature13" : {
				name : "Impactful Healing",
				source : ["M", 0],
				minlevel : 6,
				description : "\n   " + "I add my Wisdom modifier to the amount healed by my spells and hit dice (minimum 1).",
				//need formula here
			},
			"subclassfeature14" : {
				name : "Sanctified Spirit",
				source : ["M", 0],
				minlevel : 10,
				description : "\n   " + "When I complete a long rest, I am affected by Protection from Evil and Good." + "\n   " + "This lasts a number of hours equal to my Intelligence modifier (minimum 1).",
			},	
			"subclassfeature15" : {
				name : "Piercing Gaze",
				source : ["M", 0],
				minlevel : 14,
				description : "\n   " + "Once per long rest, I can use my Evil Eye as a Piercing Gaze." + "\n   " + "For 10 minutes I have truesight and automatically detect if creatures I speak with are lying.",
				usages : [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1, 1, 1],
			recovery : "long rest",
			action : ["bonus action"],
			},
		}
	}
);


